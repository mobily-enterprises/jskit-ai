LOG_LEVEL=
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=material-app
DB_TEST_NAME=material-app_test
DB_USER=annuity_app
DB_PASSWORD=replace-with-a-strong-password

SUPABASE_URL=https://YOUR-PROJECT.supabase.co
SUPABASE_PUBLISHABLE_KEY=YOUR_SUPABASE_PUBLISHABLE_KEY
SUPABASE_JWT_AUDIENCE=authenticated
# Public app origin used to build password reset redirect: <APP_PUBLIC_URL>/reset-password
# Example (dev): http://localhost:5173
APP_PUBLIC_URL=
# SMS delivery mode: none (default) or plivo
SMS_DRIVER=none
# Required when SMS_DRIVER=plivo
PLIVO_AUTH_ID=
PLIVO_AUTH_TOKEN=
PLIVO_SOURCE_NUMBER=
# Rate limit backend mode: memory (default) or redis (shared store)
# Production requires redis mode.
RATE_LIMIT_MODE=memory
# Required when RATE_LIMIT_MODE=redis
REDIS_URL=
# Enable when running behind a trusted reverse proxy/load balancer
TRUST_PROXY=false
# Prometheus metrics endpoint toggle.
METRICS_ENABLED=true
# Optional bearer token required for GET /api/metrics
METRICS_BEARER_TOKEN=
# AI assistant integration toggle. When false, AI chat route returns not found.
AI_ENABLED=false
# AI provider id (currently only openai is supported)
AI_PROVIDER=openai
# AI provider API key. Required when AI_ENABLED=true.
AI_API_KEY=
# Optional base URL for OpenAI-compatible providers.
AI_BASE_URL=
# Chat model used for workspace assistant turns.
AI_MODEL=gpt-4.1-mini
# Provider request timeout (milliseconds) per chat turn request.
AI_TIMEOUT_MS=45000
# Maximum chars accepted from a single user input message.
AI_MAX_INPUT_CHARS=8000
# Maximum prior chat messages from client history included in a turn.
AI_MAX_HISTORY_MESSAGES=20
# Maximum tool-call rounds allowed for one assistant turn.
AI_MAX_TOOL_CALLS_PER_TURN=4
# Optional workspace permission required to use AI chat at all (blank = any authenticated workspace member).
# Enforced in route auth pre-handler; denied requests return 403 before streaming starts.
# Must match a non-owner permission ID declared in RBAC manifest at startup.
AI_REQUIRED_PERMISSION=

# Workspace tenancy profile: personal, team-single, multi-workspace
TENANCY_MODE=personal
# Defaults used by bootstrap + workspace policy
WORKSPACE_SWITCHING_DEFAULT=false
WORKSPACE_INVITES_DEFAULT=false
WORKSPACE_CREATE_ENABLED=false
MAX_WORKSPACES_PER_USER=1
# Relative paths resolve from project root.
RBAC_MANIFEST_PATH=./shared/auth/rbac.manifest.json
# Frontend static directory served by server.js (relative to project root or absolute path)
FRONTEND_DIST_DIR=dist

# Avatar storage (default local filesystem via unstorage fs driver)
AVATAR_STORAGE_DRIVER=fs
# Example: /absolute/path/to/app-data/storage
AVATAR_STORAGE_FS_BASE_PATH=
# Public URL prefix where avatar files are served
AVATAR_PUBLIC_BASE_PATH=/uploads
# Workspace invite email delivery mode: none (default) or smtp
WORKSPACE_INVITE_EMAIL_DRIVER=none
# SMTP settings used when WORKSPACE_INVITE_EMAIL_DRIVER=smtp
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=
# Retention sweep defaults (used by `npm run ops:retention`)
ERROR_LOG_RETENTION_DAYS=30
INVITE_ARTIFACT_RETENTION_DAYS=90
SECURITY_AUDIT_RETENTION_DAYS=365
RETENTION_BATCH_SIZE=1000
# Frontend navigation drawer mode on desktop: "collapsible" (default) or "permanent"
VITE_DESKTOP_DRAWER_BEHAVIOR=collapsible
